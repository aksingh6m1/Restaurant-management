<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Connect 4</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .cell {
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      border: 2px solid #ccc;
      background-color: #f9fafb;
      border-radius: 50%;
      cursor: pointer;
    }

    .cell.red {
      background-color: #ef4444;
    }

    .cell.yellow {
      background-color: #facc15;
    }
  </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
  <!-- Game Container -->
  <div class="bg-white p-6 rounded-lg shadow-lg">
    <h1 class="text-2xl font-bold text-center mb-4">Connect 4</h1>
    <!-- Game Board -->
    <div id="board" class="grid grid-cols-7 gap-2">
      <!-- Cells will be dynamically generated -->
    </div>
    <!-- Status and Reset -->
    <div class="mt-4 text-center">
      <p id="status" class="text-lg font-bold text-blue-600">Player 1's Turn (Red)</p>
      <button onclick="resetGame()" class="mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Restart Game</button>
    </div>
  </div>

  <script>
    const rows = 6;
    const cols = 7;
    let board = [];
    let currentPlayer = 'red'; // Alternates between 'red' and 'yellow'

    const boardElement = document.getElementById('board');
    const statusElement = document.getElementById('status');

    // Initialize the board and render cells
    function initBoard() {
      board = Array.from({ length: rows }, () => Array(cols).fill(null));
      boardElement.innerHTML = '';
      for (let r = 0; r < rows; r++) {
        for (let c = 0; c < cols; c++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.dataset.row = r;
          cell.dataset.col = c;
          cell.onclick = () => makeMove(c);
          boardElement.appendChild(cell);
        }
      }
    }

    // Make a move in the selected column
    function makeMove(col) {
      // Find the lowest empty row in the column
      for (let row = rows - 1; row >= 0; row--) {
        if (!board[row][col]) {
          board[row][col] = currentPlayer;
          const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
          cell.classList.add(currentPlayer);

          // Check for a win or draw
          if (checkWin(row, col)) {
            statusElement.textContent = `Player ${currentPlayer === 'red' ? 1 : 2} Wins!`;
            boardElement.style.pointerEvents = 'none'; // Disable further moves
          } else if (board.flat().every(cell => cell)) {
            statusElement.textContent = `It's a draw!`;
          } else {
            // Switch players
            currentPlayer = currentPlayer === 'red' ? 'yellow' : 'red';
            statusElement.textContent = `Player ${currentPlayer === 'red' ? 1 : 2}'s Turn (${currentPlayer === 'red' ? 'Red' : 'Yellow'})`;
          }
          return;
        }
      }
      alert('Column is full! Choose another column.');
    }

    // Check for a win
    function checkWin(row, col) {
      const directions = [
        { dr: -1, dc: 0 }, // Vertical
        { dr: 0, dc: 1 }, // Horizontal
        { dr: -1, dc: 1 }, // Diagonal \
        { dr: -1, dc: -1 }, // Diagonal /
      ];

      for (const { dr, dc } of directions) {
        let count = 1;

        for (let i = 1; i < 4; i++) {
          const r = row + dr * i;
          const c = col + dc * i;
          if (r >= 0 && r < rows && c >= 0 && c < cols && board[r][c] === currentPlayer) {
            count++;
          } else {
            break;
          }
        }

        for (let i = 1; i < 4; i++) {
          const r = row - dr * i;
          const c = col - dc * i;
          if (r >= 0 && r < rows && c >= 0 && c < cols && board[r][c] === currentPlayer) {
            count++;
          } else {
            break;
          }
        }

        if (count >= 4) {
          return true;
        }
      }
      return false;
    }

    // Reset the game
    function resetGame() {
      currentPlayer = 'red';
      statusElement.textContent = "Player 1's Turn (Red)";
      boardElement.style.pointerEvents = 'auto';
      initBoard();
    }

    // Initialize the game on load
    initBoard();
  </script>
</body>
</html>
